---
title: 08 Ansible Playbooks
---

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ playbooks: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ—Ç–ª–∞–¥–∫–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞.

---

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

#### **[[01-playbook-structure|01 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Playbooks]]**

**–û—Å–Ω–æ–≤—ã playbook:**
- YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Hosts, tasks, handlers
- Pre_tasks –∏ post_tasks
- Notify –º–µ—Ö–∞–Ω–∏–∑–º

**–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**
- ansible-playbook –∫–æ–º–∞–Ω–¥–∞
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞ (--check, -vvv, -K)
- Dry-run –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- –û—Ç–≤–æ–¥ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

---

#### **[[02-variables-facts|02 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ Facts]]**

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å {{ var_name }}
- –ì–¥–µ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å (playbook, task, inventory)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —à–∞–±–ª–æ–Ω–∞—Ö

**Facts (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ):**
- –°–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ö–æ—Å—Ç–∞—Ö
- ansible_distribution, ansible_os_family
- ansible_processor_cores, ansible_memtotal_mb
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —É—Å–ª–æ–≤–∏—è—Ö

**Register –∏ —É—Å–ª–æ–≤–∏—è:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- when —É—Å–ª–æ–≤–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

#### **[[03-debug-blocks|03 –û—Ç–ª–∞–¥–∫–∞ –∏ –û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫]]**

**Debug –º–æ–¥—É–ª—å:**
- –í—ã–≤–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ–∞–∫—Ç–æ–≤
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –£—Å–ª–æ–≤–Ω—ã–π –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–ë–ª–æ–∫–∏ (Blocks):**
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
- rescue –±–ª–æ–∫ (–ø—Ä–∏ –æ—à–∏–±–∫–µ)
- always –±–ª–æ–∫ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ–≥–¥–∞)
- Try-catch-finally –ø–∞—Ç—Ç–µ—Ä–Ω

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏:**
- ignore_errors
- failed_when, changed_when
- any_errors_fatal
- Debugger breakpoints

---

#### **[[04-async-handlers|04 –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ó–∞–¥–∞—á–∏ –∏ Handlers]]**

**Async/Poll:**
- –î–æ–ª–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ timeout
- poll: 0 –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- wait_for –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä—ã: –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**Handlers:**
- –í—ã–∑–æ–≤ —á–µ—Ä–µ–∑ notify
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ü–µ playbook
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ handlers

---

#### **[[05-docker-project|05 –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ü—Ä–æ–µ–∫—Ç: Docker Setup]]**

**–ü–æ–ª–Ω—ã–π playbook:**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**Best Practices:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ansible-lint –ø—Ä–æ–≤–µ—Ä–∫–∞

**CI/CD Integration:**
- –ó–∞–ø—É—Å–∫ –≤ GitHub Actions
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ playbooks
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

---

## üîó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–¥–µ–ª–∞

```
08-Ansible Playbooks (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ 01 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Playbooks
‚îú‚îÄ‚îÄ 02 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ Facts
‚îú‚îÄ‚îÄ 03 –û—Ç–ª–∞–¥–∫–∞ –∏ –û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ 04 –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ó–∞–¥–∞—á–∏ –∏ Handlers
‚îî‚îÄ‚îÄ 05 –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ü—Ä–æ–µ–∫—Ç: Docker Setup
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏

**Playbook Lifecycle:**
```
–ü–∞—Ä—Å–∏–Ω–≥ ‚Üí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚Üí –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Üí –û—Ç—á–µ—Ç
  ‚Üì          ‚Üì           ‚Üì          ‚Üì
Config    SSH+Facts    Tasks    Summary
```

**–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:**
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—É—Å–∫–æ–≤ = –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

**Handlers:**
- –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∫–æ–Ω—Ü–µ
- –°—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø—Ä–∏ notify
- –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è restart —Å–µ—Ä–≤–∏—Å–æ–≤

---

## ‚úÖ Checklist

**–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∞:**
- ‚úÖ –ü–æ–Ω–∏–º–∞–µ—à—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É playbook
- ‚úÖ –ú–æ–∂–µ—à—å –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π playbook
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—à—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ facts
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—à—å –æ—à–∏–±–∫–∏ (rescue/always)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—à—å async –¥–ª—è –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—à—å –∫–æ–¥ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- ‚úÖ –ì–æ—Ç–æ–≤ –ø–∏—Å–∞—Ç—å production-ready playbooks

---