---
title: "4 Сила Volumes"
description: "Практический эксперимент: уничтожаем контейнер с базой данных и проверяем, выживут ли данные благодаря Volumes."
---

В этом уроке мы на практике убедимся, что контейнеры эфемерны, а Volumes — вечны. Мы создадим базу, запишем в неё данные, уничтожим контейнер и восстановим данные в новом контейнере.

## Шаг 1: Запуск базы данных

Запустим контейнер с MongoDB, подключив к нему именованный том `lab-vol`.
```bash
docker run -d \
  --name lab-db \
  -v lab-vol:/data/db \
  mongo:6
```

## Шаг 2: Имитация работы (Запись данных)

Вместо сложного подключения клиентом, мы просто создадим файл прямо внутри папки базы данных.
```bash
docker exec lab-db touch /data/db/MY_SECRET_FILE
```
*Команда `touch` создает пустой файл. Теперь в нашей "базе" есть файл `MY_SECRET_FILE`.*

## Шаг 3: Катастрофа (Уничтожение)

Представим, что сервер упал или мы случайно удалили контейнер.
```bash
docker rm -f lab-db
```
*Контейнер удален безвозвратно. Если бы мы не использовали Volume, файл `MY_SECRET_FILE` исчез бы навсегда.*

## Шаг 4: Восстановление (Disaster Recovery)

Запустим **новый** контейнер (даже с другим именем), но подключим к нему **тот же самый** том.
```bash
docker run -d \
  --name lab-db-2 \
  -v lab-vol:/data/db \
  mongo:6
```

## Шаг 5: Проверка

Проверим, на месте ли наш секретный файл в новом контейнере.
```bash
docker exec lab-db-2 ls /data/db
```

**Ожидаемый результат:**
Вы увидите список файлов MongoDB, и среди них будет:
```
MY_SECRET_FILE
collection-0-....wt
index-1-....wt
...
```

## Вывод
Данные пережили смерть контейнера, потому что они хранились в Volume, который живет своей жизнью на хосте, независимо от контейнеров.
