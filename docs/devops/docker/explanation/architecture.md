---
title: "Архитектура Docker"
description: "Как устроен Docker изнутри: Engine, namespaces, cgroups, слои файловой системы и отличие от виртуальных машин."
---


Docker — это платформа для запуска приложений в изолированных контейнерах. В отличие от виртуальных машин, которые эмулируют целое аппаратное обеспечение, контейнеры делят ядро хостовой операционной системы.

## Контейнеры vs Виртуальные машины

Главное отличие — уровень абстракции.

| Характеристика | Контейнер (Docker) | Виртуальная машина (VM) |
|---|---|---|
| **Изоляция** | На уровне процессов (User Space) | На уровне железа (Hardware) |
| **ОС** | Использует ядро хоста | Загружает свою полную Guest OS |
| **Размер** | Мегабайты (только бинарники приложения) | Гигабайты (ОС + приложение) |
| **Старт** | Миллисекунды (как запуск процесса) | Минуты (загрузка ОС) |
| **Производительность** | Нативная (почти без оверхеда) | Накладные расходы на эмуляцию |

## Внутреннее устройство (Linux Kernel)

Docker не создает изоляцию сам "с нуля", а использует возможности ядра Linux:

### 1. Namespaces (Пространства имен)
Обеспечивают изоляцию того, что **видит** процесс.
* **PID Namespace:** Процесс внутри контейнера думает, что он PID 1, и не видит процессы хоста.
* **Network Namespace:** У контейнера свой IP, свои порты, своя таблица маршрутизации.
* **Mount Namespace:** У контейнера своя корневая файловая система (`/`), независимая от хоста.
* **UTS Namespace:** Собственное имя хоста (hostname).

### 2. Cgroups (Control Groups)
Обеспечивают изоляцию того, что процесс **может использовать**.
* Ограничивают потребление CPU.
* Ограничивают объем памяти (RAM).
* Контролируют доступ к устройствам и I/O диска.

### 3. Union File System (UnionFS)
Файловая система Docker состоит из слоев (layers).
* **Образ (Image):** Набор неизменяемых (read-only) слоев.
* **Контейнер (Container):** Тонкий изменяемый (read-write) слой поверх образа.
* Если контейнер изменяет файл из образа, он создает копию файла в своем слое (Copy-on-Write).

## Компоненты Docker Platform

* **Docker Daemon (`dockerd`):** Фоновый процесс, который управляет объектами Docker (образы, контейнеры, сети).
* **Docker Client (`docker`):** CLI утилита, через которую вы отправляете команды демону (через REST API или сокет).
* **Docker Registry:** Хранилище образов (например, Docker Hub).

## Связанные материалы

- [[devops/docker/tutorials/quickstart|Быстрый старт: запуск первого контейнера]]
- [[devops/docker/how-to/install-ubuntu-2404|Установка Docker]]
