---
title: "Архитектура Ansible"
description: "Как работает Ansible: Control Node, Managed Nodes, инвентарь и выполнение модулей."
---


Ansible использует архитектуру "Push": управляющий узел подключается к целевым серверам и "толкает" (push) туда конфигурацию.

## Компоненты

### 1. Control Node (Управляющий узел)
Компьютер или сервер, где установлен Ansible и хранятся playbooks.
* **Требования:** Linux/macOS (Windows не поддерживается нативно), Python 3.10+.
* Отсюда запускаются команды `ansible-playbook`.

### 2. Managed Nodes (Управляемые узлы)
Серверы, которые вы настраиваете.
* **Требования:** SSH-сервер, Python 2.7+ или 3.5+.
* Ansible не оставляет на них никаких демонов после завершения работы.

### 3. Inventory (Инвентарь)
Файл (обычно `hosts.ini` или `hosts.yaml`), где перечислены IP-адреса или домены управляемых узлов.

## Как происходит выполнение

Когда вы запускаете Playbook:

1. **Парсинг:** Ansible читает конфиг и инвентарь.
2. **Подключение:** Устанавливает SSH-соединение с каждым хостом.
3. **Сбор фактов (Gather Facts):** Собирает информацию о системе (OS, IP, CPU) в переменные.
4. **Выполнение задач:**
   * Ansible берет задачу (например, `apt: name=nginx`).
   * Генерирует небольшой Python-скрипт (модуль) с параметрами.
   * Копирует этот скрипт на целевой сервер (обычно в `/tmp`).
   * Запускает скрипт на удаленном сервере.
   * Получает JSON-ответ (успех/ошибка, что изменилось).
   * Удаляет временный скрипт.

Этот процесс повторяется для каждой задачи в списке.

## Связанные материалы
- [[devops/ansible/explanation/what-is-ansible|Что такое Ansible]]
- [[devops/ansible/how-to/install-and-setup|Установка и настройка]]
