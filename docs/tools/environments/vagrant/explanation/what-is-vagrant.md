---
title: "Что такое Vagrant"
description: "Введение в Vagrant: Infrastructure as Code, архитектура, компоненты и сценарии использования."
---


Vagrant — инструмент для автоматизации создания и управления локальными виртуальными средами разработки. Вместо ручной настройки виртуальных машин в GUI вы описываете конфигурацию в коде (Vagrantfile) и получаете воспроизводимые окружения одной командой.

## Проблема ручного создания ВМ

Создание виртуальной машины вручную через VirtualBox занимает 30+ минут на одну ВМ:

1. Открыть VirtualBox
2. Создать новую машину
3. Выбрать ISO образ ОС
4. Выделить RAM, CPU, диск
5. Установить ОС (15+ минут)
6. Настроить сеть
7. Повторить для каждой машины в кластере

**С Vagrant:**
- Написать `Vagrantfile` один раз (5 минут)
- Выполнить `vagrant up` (10 минут на загрузку и запуск)
- Получить 5 идентичных машин, готовых к работе

## Infrastructure as Code (IaC)

Vagrant воплощает принцип "инфраструктура как код": конфигурация среды хранится в версионируемом файле.

```ruby
Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/noble64"  # Ubuntu 24.04 LTS
  config.vm.provider "virtualbox" do |vb|
    vb.memory = 2048
    vb.cpus = 2
  end
end
```

**Преимущества:**
- Версионирование в Git (история изменений среды)
- Повторяемость (одинаковая среда на Windows, macOS, Linux)
- Масштабируемость (добавить машину = добавить 3 строки кода)
- Документирование (конфиг = живая документация)

## Архитектура

```
┌────────────────────────────────────┐
│      ХОСТ (ваш ноутбук/сервер)     │
│                                    │
│  ┌──────────────────────────────┐ │
│  │ Vagrant                      │ │
│  │ ├─ Vagrantfile (конфиг)      │ │
│  │ ├─ Provisioners (Ansible)    │ │
│  │ └─ Boxes (образы ОС)         │ │
│  └──────────────────────────────┘ │
│              ↓                     │
│  ┌──────────────────────────────┐ │
│  │ Provider (VirtualBox/VMware) │ │
│  └──────────────────────────────┘ │
│              ↓                     │
│  ┌───┬────┬────┬────┬────┐       │
│  │VM1│VM2 │VM3 │VM4 │VM5 │       │
│  └───┴────┴────┴────┴────┘       │
└────────────────────────────────────┘
```

**Компоненты:**

- **Vagrant** — оркестратор, который читает Vagrantfile и управляет ВМ
- **Provider** — гипервизор (VirtualBox, VMware, Hyper-V, Libvirt)
- **Box** — предсобранный образ ОС (аналог Docker image для ВМ)
- **Provisioner** — инструмент настройки внутри ВМ (Shell, Ansible, Chef)

## Когда использовать Vagrant

**Идеально для:**
- Локальная разработка (dev-окружение, идентичное production)
- Тестирование Ansible плейбуков в чистой среде
- Обучение DevOps/Linux без риска сломать хост-систему
- Командная разработка (одинаковые ВМ у всей команды)
- Воспроизводимые окружения (CI/CD, тестирование миграций БД)

**Не подходит для:**
- Production-инфраструктура (используйте Terraform)
- Облачные ресурсы AWS/Azure (используйте Terraform)
- Контейнеризация приложений (используйте Docker)
- Масштабирование 100+ машин (используйте Kubernetes)

## Связанные материалы
- [[tools/environments/vagrant/reference/vagrant-comparison|Сравнение Vagrant с альтернативами]]
- [[tools/environments/vagrant/how-to/basic-workflow|Базовый рабочий процесс]]
- [[tools/environments/virtualbox/explanation/what-is-virtualbox|Что такое VirtualBox]]
