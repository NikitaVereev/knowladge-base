---
title: "3 Настройка SSH для Ansible"
description: "Генерация ключей, копирование на серверы и настройка беспарольного доступа."
---

Для работы Ansible необходим доступ к серверам по SSH без ввода пароля вручную (используются SSH-ключи).

## 1. Генерация ключа (на Control Node)
Если у вас еще нет ключа:
```bash
ssh-keygen -t ed25519 -C "ansible-control"
```
Нажимайте Enter для всех вопросов (парольную фразу лучше не ставить для автоматизации, либо использовать ssh-agent).

## 2. Копирование ключа на серверы
Используйте `ssh-copy-id`:
```bash
ssh-copy-id -i ~/.ssh/id_ed25519.pub user@192.168.1.10
```

## 3. Проверка
Попробуйте зайти по SSH. Пароль запрашиваться не должен.
```bash
ssh user@192.168.1.10
```

## Troubleshooting
Если получаете `Permission denied`:
1.  Убедитесь, что публичный ключ добавлен в `~/.ssh/authorized_keys` на сервере.
2.  Проверьте права доступа на сервере:
    *   `chmod 700 ~/.ssh`
    *   `chmod 600 ~/.ssh/authorized_keys`
3.  Убедитесь, что в `ansible.cfg` указан правильный `remote_user`.
