### ะะฟัะธะผะธะทะฐัะธั ะพะฑัะฐะทะพะฒ

ะฃะผะตะฝััะตะฝะธะต ัะฐะทะผะตัะฐ ะธ ัะปัััะตะฝะธะต ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ Docker ะพะฑัะฐะทะพะฒ.

---

#### ะัะพะฑะปะตะผั ะฟัะธ ัะฑะพัะบะต

**ะะพะปััะพะน ัะฐะทะผะตั ะพะฑัะฐะทะฐ:**
- Node.js ะพัะธัะธะฐะปัะฝัะน ะพะฑัะฐะท: 900+ ะะ
- ะะพัะปะต ัััะฐะฝะพะฒะบะธ ะทะฐะฒะธัะธะผะพััะตะน: 1000+ ะะ
- ะะพัะปะต ะดะพะฑะฐะฒะปะตะฝะธั ะบะพะดะฐ: 1200+ ะะ

**ะะตัััะตะบัะธะฒะฝะพะต ะบััะธัะพะฒะฐะฝะธะต:**
- ะัะธ ะธะทะผะตะฝะตะฝะธะธ ะพะดะฝะพะณะพ ัะฐะนะปะฐ ะฒ ะบะพะดะต ะฟะพะฒัะพััะตััั ะฒะตัั build
- ะะตัะตัััะฐะฝะฐะฒะปะธะฒะฐัััั ะทะฐะฒะธัะธะผะพััะธ ะบะฐะถะดัะน ัะฐะท
- ะะพะถะตั ะทะฐะฝััั ะผะธะฝััั ะดะฐะถะต ะดะปั ะผะฐะปัั ะธะทะผะตะฝะตะฝะธะน

---

#### ะัะฑะพั ะฑะฐะทะพะฒะพะณะพ ะพะฑัะฐะทะฐ

**ะะฐะทะผะตั ะฑะฐะทะพะฒัั ะพะฑัะฐะทะพะฒ:**

| ะะฑัะฐะท | ะะฐะทะผะตั |
|-------|--------|
| `ubuntu:22.04` | 77 ะะ |
| `debian:bookworm-slim` | 114 ะะ |
| `node:18` | 882 ะะ |
| `node:18-alpine` | 150 ะะ |
| `python:3.11` | 997 ะะ |
| `python:3.11-slim` | 340 ะะ |
| `python:3.11-alpine` | 53 ะะ |

**Alpine Linux:**
- ะะธะฝะธะผะฐะปะธััะธัะฝัะน ะพะฑัะฐะท (~5 ะะ)
- ะะดะตะฐะปะตะฝ ะดะปั ะบะพะฝัะตะนะฝะตัะพะฒ
- ะะผะตะตั apk (ะบะฐะบ apt-get, ะฝะพ ะดะปั Alpine)

**ะัะธะผะตั:**
```dockerfile
# ะะพะปััะพะน ะพะฑัะฐะท (882 ะะ)
FROM node:18
RUN npm install

# ะะฐะปะตะฝัะบะธะน ะพะฑัะฐะท (150 ะะ)
FROM node:18-alpine
RUN npm install
```

**ะะตะทัะปััะฐั:** 1200 ะะ โ 450 ะะ (65% ัะบะพะฝะพะผะธั!)

---

#### ะะฟัะธะผะธะทะฐัะธั ะบััะธัะพะฒะฐะฝะธั ัะปะพัะฒ

**ะัะพะฑะปะตะผะฐ:**
```dockerfile
FROM node:18-alpine

WORKDIR /app
COPY . .              # โ ะบะพะฟะธััะตัั ะะะ (ะผะตะฝัะตััั ัะฐััะพ)
RUN npm install       # โ ะฟะตัะตัััะฐะฝะฐะฒะปะธะฒะฐะตัั ะทะฐะฒะธัะธะผะพััะธ (ะผะตะฝััััั ัะตะดะบะพ)
```

ะะตะทัะปััะฐั: ะัะฑะพะต ะธะทะผะตะฝะตะฝะธะต ะบะพะดะฐ ะฟัะธะฒะพะดะธั ะบ ะฟะตัะตัััะฐะฝะพะฒะบะต npm!

**ะะตัะตะฝะธะต: ะะพะฟะธััะน ะทะฐะฒะธัะธะผะพััะธ ะะ ะบะพะดะฐ**
```dockerfile
FROM node:18-alpine

WORKDIR /app

# ะจะฐะณ 1: ะะพะฟะธััะตะผ ัะพะปัะบะพ ะทะฐะฒะธัะธะผะพััะธ (ัะตะดะบะพ ะผะตะฝััััั)
COPY package*.json ./
RUN npm ci --only=production

# ะจะฐะณ 2: ะะพะฟะธััะตะผ ะบะพะด (ัะฐััะพ ะผะตะฝัะตััั)
COPY . .

EXPOSE 3000
CMD ["node", "index.js"]
```

**ะะตะทัะปััะฐั:**
- ะะตัะฒัะน build: ะฟะพะปะฝะฐั ัะฑะพัะบะฐ (~30 ัะตะบ)
- ะัะพัะพะน build (ะธะทะผะตะฝัะฝ ะบะพะด): ัะพะปัะบะพ ะบะพะฟะธัะพะฒะฐะฝะธะต ะบะพะด (~2 ัะตะบ, ะธัะฟะพะปัะทัะตััั ะบัั!)

**ะะพัะตะผั ััะพ ัะฐะฑะพัะฐะตั:**
- ะกะปะพะธ ะบััะธัััััั ะฟะพ ัะพะดะตัะถะธะผะพะผั ะธะฝััััะบัะธะธ
- ะัะปะธ `COPY package*.json ./` ะฝะต ะธะทะผะตะฝะธะปะฐัั, ะบัั ะธัะฟะพะปัะทัะตััั
- RUN ัะปะพะน ะฟะตัะตะธัะฟะพะปัะทัะตััั
- ะะพะฒัะน COPY . . ัะพะทะดะฐัั ัะพะปัะบะพ ะฝะพะฒัะน ัะปะพะน, ะฝะต ััะพะณะฐั ะทะฐะฒะธัะธะผะพััะธ

---

#### Multi-stage build (ะผัะปััะธััะตะนะดะถ)

**ะัะพะฑะปะตะผะฐ ะพะดะฝะพัะฐะณะพะฒะพะน ัะฑะพัะบะธ:**
```dockerfile
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm install

COPY . .
RUN npm run build    # โ ัะฑะพัะบะฐ (ัะพะทะดะฐัั ะธััะพะดะฝัะน ะบะพะด)

EXPOSE 3000
CMD ["node", "dist/index.js"]
```

**ะงัะพ ะฟัะพะธััะพะดะธั:**
- ะััะพะดะฝัะน ะบะพะด (`src/` ะดะธัะตะบัะพัะธั) + ะธััะพะดะฝะธะบะธ (`*.ts`) ะพััะฐัััั ะฒ ะพะฑัะฐะทะต
- node_modules ั dev-ะทะฐะฒะธัะธะผะพัััะผะธ ะพััะฐัััั ะฒ ะพะฑัะฐะทะต
- ะคะธะฝะฐะปัะฝัะน ะพะฑัะฐะท ะฑะพะปััะพะน (300+ ะะ)

**ะะตัะตะฝะธะต: Multi-stage build**

```dockerfile
# Stage 1: ะกะฑะพัะบะฐ
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build

# Stage 2: ะคะธะฝะฐะปัะฝัะน ะพะฑัะฐะท
FROM node:18-alpine

WORKDIR /app

# ะะพะฟะธััะตะผ ะขะะะฌะะ ะฝัะถะฝัะต ัะฐะนะปั ะธะท builder
COPY package*.json ./
RUN npm ci --only=production

COPY --from=builder /app/dist ./dist

EXPOSE 3000
CMD ["node", "dist/index.js"]
```

**ะะตะทัะปััะฐั:**
- ะคะธะฝะฐะปัะฝัะน ะพะฑัะฐะท ัะพะดะตัะถะธั ะขะะะฌะะ runtime
- ะััะพะดะฝัะน ะบะพะด ะะ ะฟะพะฟะฐะดะฐะตั ะฒ production
- dev-ะทะฐะฒะธัะธะผะพััะธ ะะ ะฟะพะฟะฐะดะฐัั ะฒ production
- ะะฐะทะผะตั: 472 ะะ โ 150 ะะ (68% ัะบะพะฝะพะผะธั!)

**ะะธะฐะณัะฐะผะผะฐ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Stage 1: Builder       โ
โ โโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ npm install (all)   โ โ
โ โ npm run build       โ โ
โ โ dist/ folder        โ โ
โ โ node_modules (all)  โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโ
             โ
        COPY --from=builder
             โ
โโโโโโโโโโโโโโผโโโโโโโโโโโโโ
โ Stage 2: Runtime        โ
โ โโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ npm install --prod  โ โ
โ โ dist/ folder        โ โ
โ โ node_modules (prod) โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

#### Go ะฟัะธะปะพะถะตะฝะธะต ั Scratch

**ะกะฐะผัะน ัะบัััะตะผะฐะปัะฝัะน ะฟัะธะผะตั: Go + Scratch**

```dockerfile
# Stage 1: ะะพะผะฟะธะปััะธั
FROM golang:1.21-alpine AS builder

WORKDIR /app
COPY . .
RUN go build -o app .

# Stage 2: ะคะธะฝะฐะปัะฝัะน ะพะฑัะฐะท (scratch = ะฟัััะพะน ะพะฑัะฐะท)
FROM scratch

COPY --from=builder /app/app /app
ENTRYPOINT ["/app"]
```

**ะะตะทัะปััะฐั:**
- Golang ะธััะพะดะฝัะน ะพะฑัะฐะท: 300+ ะะ
- ะกะบะพะผะฟะธะปะธัะพะฒะฐะฝะฝัะน ะฑะธะฝะฐัะฝะธะบ: 6-10 ะะ
- **ะคะธะฝะฐะปัะฝัะน ะพะฑัะฐะท: 6-10 ะะ!** ๐
- Scratch ะพะฑัะฐะท ะธะผะตะตั ัะพะปัะบะพ ะบะพะดั ะฝะฐ Linux ััะพะฒะฝะต

**ะะพัะตะผั ััะพ ะฒะพะทะผะพะถะฝะพ:**
- Go ะบะพะผะฟะธะปะธััะตััั ะฒ ะพะดะธะฝ ััะฐัะธัะตัะบะธะน ะฑะธะฝะฐัะฝะธะบ
- ะ ะบะพะฝัะตะนะฝะตัะต ะฝัะถะฝะฐ ัะพะปัะบะพ ะะก ะดะปั ะทะฐะฟััะบะฐ ะฑะธะฝะฐัะฝะธะบะฐ
- Scratch ะพะฑัะฐะท ัะพะดะตัะถะธั ะผะธะฝะธะผะฐะปัะฝัะต ะธะฝััััะผะตะฝัั ัะดัะฐ

---

#### ะัะธััะบะฐ ะฟัะธ ัััะฐะฝะพะฒะบะต

**ะะปะพัะพ (ะพััะฐะฒะปัะตั ะบััะธ):**
```dockerfile
RUN apt-get update
RUN apt-get install -y curl
```

**ะฅะพัะพัะพ (ะพัะธัะฐะตั ะบััะธ):**
```dockerfile
RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*
```

**ะะปั Alpine (apk):**
```dockerfile
RUN apk add --no-cache curl git
```

**ะะปั npm:**
```dockerfile
RUN npm ci --only=production && npm cache clean --force
```

---

#### ะะฝะฐะปะธะท ะพะฑัะฐะทะฐ: Dive tool

**ะฃััะฐะฝะพะฒะบะฐ Dive:**
```bash
# Ubuntu/Debian
sudo apt-get install -y dive

# macOS
brew install dive
```

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
```bash
dive myapp:latest
```

**ะงัะพ ะฒะธะดะธัั:**
- ะกะปะพะธ ะพะฑัะฐะทะฐ ะธ ะธั ัะฐะทะผะตัั
- ะคะฐะนะปั ะฒ ะบะฐะถะดะพะผ ัะปะพะต
- "Wasted space" โ ะผะตััะพ ะทะฐะฝััะพ, ะฝะพ ะฝะตะธัะฟะพะปัะทัะตััั
- ะญััะตะบัะธะฒะฝะพััั ะพะฑัะฐะทะฐ

**ะัะธะผะตัั Dive:**
```
Layer โ Digest                                    โ Size  โ Command
โโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโ
  1   โ sha256:e7...                             โ 150MB โ FROM node:18-alpine
  2   โ sha256:ab...                             โ  45MB โ RUN npm install
  3   โ sha256:cd...                             โ  20MB โ COPY . .
  4   โ sha256:ef...                             โ  15MB โ RUN npm run build
โโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโ
Total: 230MB
```

---

#### Best Practices ะะฟัะธะผะธะทะฐัะธะธ

โ **ะัะฟะพะปัะทัะน Alpine ะพะฑัะฐะทั** ะดะปั ะผะฐะปะตะฝัะบะพะณะพ ัะฐะทะผะตัะฐ  
โ **ะะพะฟะธััะน ะทะฐะฒะธัะธะผะพััะธ ะพัะดะตะปัะฝะพ** ะดะปั ะบััะธัะพะฒะฐะฝะธั  
โ **Gruppะธััะน RUN ะบะพะผะฐะฝะดั** ั `&&` ะธ `\` ะดะปั ะผะฝะพะณะพัััะพัะฝะพััะธ  
โ **ะัะฟะพะปัะทัะน .dockerignore** ะดะปั ะธัะบะปััะตะฝะธั ัะฐะนะปะพะฒ  
โ **Multi-stage build** ะดะปั production ะพะฑัะฐะทะพะฒ  
โ **ะฃะดะฐะปัะน ะบััะธ** ะฟัะธ ัััะฐะฝะพะฒะบะต ะฟะฐะบะตัะพะฒ  
โ **ะะฝะฐะปะธะทะธััะน ะพะฑัะฐะทั** ััะธะปะธัะพะน Dive  
โ **ะัะฟะพะปัะทัะน scratch** ะดะปั compiled ัะทัะบะพะฒ (Go, Rust, C)  

---

#### ะัะฐะบัะธัะตัะบะธะน ะฟัะธะผะตั: Node.js

**ะะพ ะพะฟัะธะผะธะทะฐัะธะธ:**
```dockerfile
FROM node:18
WORKDIR /app
COPY . .
RUN npm install
RUN npm run build
CMD ["node", "dist/index.js"]
```

ะะฐะทะผะตั: 1200 ะะ, build: 120 ัะตะบ

---

**ะะพัะปะต ะพะฟัะธะผะธะทะฐัะธะธ:**
```dockerfile
# Stage 1: ะะฐะฒะธัะธะผะพััะธ ะธ ัะฑะพัะบะฐ
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build

# Stage 2: Runtime
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY --from=builder /app/dist ./dist

EXPOSE 3000
CMD ["node", "dist/index.js"]
```

ะะฐะทะผะตั: 180 ะะ, build: 25 ัะตะบ (ะฝะฐ ะบััะต: 3 ัะตะบ)

**ะญะบะพะฝะพะผะธั:**
- ะะฐะทะผะตั: 1200 ะะ โ 180 ะะ (85% โ)
- ะัะตะผั build: 120 ัะตะบ โ 25 ัะตะบ (79% โ)
- ะัะตะผั build ะฝะฐ ะบััะต: 120 ัะตะบ โ 3 ัะตะบ (97% โ)

---

#### ะกัะฐะฒะฝะตะฝะธะต ัะฐะทะผะตัะพะฒ

**Go ะฟัะธะปะพะถะตะฝะธะต:**

| ะะฐัะธะฐะฝั | ะะฐะทะผะตั |
|---------|--------|
| ะะตะท ะพะฟัะธะผะธะทะฐัะธะธ | 300 ะะ |
| Alpine | 50 ะะ |
| Multi-stage + Alpine | 15 ะะ |
| **Multi-stage + Scratch** | **6 ะะ** |

---
