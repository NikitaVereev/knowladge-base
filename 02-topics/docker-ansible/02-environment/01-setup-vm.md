### Установка виртуальной машины

##### VirtualBox и Ubuntu

**Предварительные требования:**

- **VirtualBox 7.0+** установлен на хост-машине.
- **Ubuntu 24.04 LTS ISO** образ скачан.
- **Минимум 2 ГБ RAM** и **20 ГБ диска** для VM.

---

**1. Проверить версию ядра (Arch Linux):**

```bash
uname -r
```

**Результат:** Должно быть стандартное ядро `linux`, не `linux-lts` или `linux-zen`.

---

**2. Установить VirtualBox (Arch Linux):**

```bash
sudo pacman -Syu
sudo pacman -S linux-headers virtualbox virtualbox-host-modules-arch
```

**Результат:**
- `linux-headers` — заголовочные файлы ядра.
- `virtualbox` — основная программа.
- `virtualbox-host-modules-arch` — модули ядра для Arch.

---

**3. Загрузить модуль VirtualBox:**

```bash
sudo modprobe vboxdrv
lsmod | grep vbox
```

**Результат:** Должны отобразиться модули `vboxdrv`, `vboxnetadp`, `vboxnetflt`.

**Если модули не загрузились:**
```bash
sudo /sbin/vboxconfig
```

---

**4. Добавить пользователя в группу `vboxusers`:**

```bash
sudo usermod -aG vboxusers $USER
su - $USER
```

**Результат:** Даёт права на работу с USB и сетевыми интерфейсами без `sudo`.

---

**5. Создать виртуальную машину:**

- Откройте VirtualBox.
- Нажмите "Новая".
- **Имя:** `Docker-Lab` (или любое другое).
- **Тип OS:** Linux.
- **Версия:** Ubuntu 24.04 LTS 64-bit.
- **Память:** 2048 МБ минимум.
- **Жёсткий диск:** VDI, 20 ГБ, динамическое выделение.

---

**6. Подключить ISO образ Ubuntu:**

- В параметрах VM выберите "Накопители".
- На контроллере IDE выберите "Пусто".
- Нажмите на иконку привода.
- Выберите файл `ubuntu-24.04-*.iso`.

---

**7. Запустить установку Ubuntu:**

- Нажмите "Запустить".
- Пройдите установку:
  - Выберите язык.
  - Выберите раскладку клавиатуры.
  - Установите имя пользователя и пароль.
  - **Важно:** отметьте "OpenSSH server" при выборе софта.

---

**8. Настроить проброс портов для SSH:**

- После установки выключите VM.
- В параметрах VM выберите "Сеть" → "Адаптер 1" → "Дополнительно".
- Выберите "Проброс портов".
- Добавьте:
  - **Name:** SSH
  - **Host IP:** 127.0.0.1
  - **Host Port:** 2222
  - **Guest Port:** 22

---

**9. Запустить VM и проверить SSH:**

```bash
ssh username@127.0.0.1 -p 2222
```

**Результат:** Подключится к VM по SSH.

---
